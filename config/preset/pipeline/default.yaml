# @package _global_
# Default preset for local development/testing

# Fine-tuning stage overrides - minimal for quick testing
fine_tuning:
  model:
    name: meta-llama/Llama-3.1-8B-Instruct
    device_map: auto

  data:
    batch_size: 2
    dataloader_num_workers: 2
    max_train_samples: 100
    max_val_samples: 20
    max_test_samples: 20

  trainer:
    max_epochs: 1
    accelerator: auto
    devices: 1
    strategy: auto
    precision: bf16
    enable_progress_bar: true

  lora:
    r: 8
    lora_alpha: 16

# Inference stage overrides
inference:
  model:
    name: meta-llama/Llama-3.1-8B-Instruct

  data:
    batch_size: 4
    max_test_samples: 50

# TTA stage overrides - small model for testing
tta:
  model:
    name: facebook/musicgen-small
    compile: false
    device_map: null

  data:
    batch_size: 2

  generation:
    use_accelerator: false

  evaluation:
    skip_evaluation: true

  target_split: test
  max_samples: 10

# Disable wandb for local testing
logger: null

# Simple callbacks
callbacks:
  rich_progress_bar: {}
